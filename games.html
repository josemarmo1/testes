<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Help Amado — Games</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Plus+Jakarta+Sans:wght@600;800&display=swap" rel="stylesheet"/>
  <style>
    :root{
      --laranja:#ff6b00; --roxo:#6a1b9a; --azul:#2563eb; --verde:#16a34a; --amarelo:#eab308;
      --cinza-claro:#f5f7fb; --texto:#1f2937; --borda:#e5e7eb; --card:#ffffff;
      --font-heading:'Plus Jakarta Sans',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial,sans-serif;
      --font-body:'Inter',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial,sans-serif;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;background:#fff;color:var(--texto);font-family:var(--font-body);line-height:1.55}

    header{background:#fff;position:sticky;top:0;z-index:50;border-bottom:1px solid var(--borda)}
    header::after{content:"";display:block;height:3px;background:linear-gradient(90deg,var(--roxo),var(--laranja),var(--azul),var(--verde),var(--amarelo),var(--roxo));background-size:300% 100%;animation:brandMove 12s linear infinite}
    .header-wrap{display:flex;align-items:center;justify-content:space-between;gap:16px;max-width:1200px;margin:0 auto;padding:14px 20px}
    .logo-text{font-family:var(--font-heading);font-weight:800;font-size:1.5rem;text-decoration:none}
    .logo-orange{color:var(--laranja)} .logo-purple{color:var(--roxo)}
    nav a{text-decoration:none;color:var(--texto);margin-left:18px;font-weight:600;opacity:.85;position:relative}
    nav a:hover{color:var(--laranja);opacity:1}
    nav a.active{color:var(--laranja)}
    nav a::after{content:"";position:absolute;left:0;bottom:-6px;height:2px;width:0;background:currentColor;transition:width .2s ease}
    nav a:hover::after,nav a.active::after{width:100%}

    .hero{position:relative;overflow:hidden;background:linear-gradient(120deg,#fff 0%,#fff 30%,#f8efff 60%,#fff 100%);padding:48px 20px}
    .hero::before{content:"";position:absolute;inset:-40%;background:
      radial-gradient(40% 30% at 20% 20%, rgba(106,27,154,.12), transparent 60%),
      radial-gradient(35% 25% at 80% 30%, rgba(255,107,0,.10), transparent 60%),
      radial-gradient(45% 35% at 50% 80%, rgba(37,99,235,.08), transparent 60%);animation:floatBg 16s linear infinite}
    @keyframes floatBg{0%{transform:translate3d(0,0,0)}50%{transform:translate3d(-5%, 3%, 0)}100%{transform:translate3d(0,0,0)}}
    .hero .wrap{max-width:1200px;margin:0 auto;text-align:center;position:relative}
    .hero h1{font:800 clamp(1.5rem,3.2vw,2.3rem)/1.1 var(--font-heading);color:var(--roxo);margin:0}
    .hero p{margin:.4rem 0 0;opacity:.85}

    .container{max-width:1200px;margin:0 auto;padding:24px 18px 60px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:20px}
    .card{background:#fff;border:1px solid var(--borda);border-radius:16px;box-shadow:0 6px 18px rgba(0,0,0,.05);overflow:hidden;display:flex;flex-direction:column}
    .card-title{font:800 1rem/1.2 var(--font-heading);color:var(--roxo);padding:12px 14px;border-bottom:1px solid var(--borda)}
    .card-body{padding:14px;display:grid;gap:12px}
    .controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .controls label{font-size:.9rem;font-weight:600}
    .controls input[type="range"],.controls input[type="number"],.controls select,.controls input[type="text"]{padding:6px 8px;border:1px solid var(--borda);border-radius:8px}
    .controls input[type="range"]{width:150px}
    .canvas-wrap{background:#f9fafb;border:1px dashed #e5e7eb;border-radius:12px;display:grid;place-items:center;min-height:260px;overflow:hidden;position:relative}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:9px 12px;border-radius:10px;border:1px solid var(--borda);cursor:pointer;font-weight:800;text-decoration:none;background:#fff}
    .btn-primary{background:var(--laranja);border-color:transparent;color:#fff}
    .muted{font-size:.88rem;opacity:.8}

    .site-footer{color:#fff;margin-top:40px;position:relative;overflow:hidden;background:linear-gradient(90deg,var(--roxo),var(--laranja),var(--azul),var(--verde),var(--amarelo),var(--roxo));background-size:300% 100%;animation:brandMove 16s linear infinite}
    .footer-wrap{max-width:1200px;margin:0 auto;padding:18px 20px;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
    .site-footer p{margin:0;font-weight:600}
    @keyframes brandMove{0%{background-position:0% 50%}100%{background-position:300% 50%}}
    @media (prefers-reduced-motion:reduce){header::after,.site-footer,.hero::before{animation:none;background-position:50% 50%}}

    /* cubo 3D faces */
    #cube .face{position:absolute;width:120px;height:120px;transform-origin:center;border:1px solid rgba(0,0,0,.08);box-shadow:inset 0 0 20px rgba(255,255,255,.25);border-radius:8px}
  </style>
</head>
<body>
  <header>
    <div class="header-wrap">
      <a href="index.html" class="logo-text" aria-label="Voltar para Início">
        <span class="logo-orange">Help</span> <span class="logo-purple">Amado</span>
      </a>
      <nav aria-label="Navegação principal">
        <a href="index.html">Início</a>
        <a href="manuais.html">Manuais</a>
        <a href="suporte.html">Suporte</a>
        <a class="active" href="games.html" aria-current="page">Games</a>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="wrap">
      <h1>Mini-Simuladores</h1>
      <p>Brinque com conceitos de 3D, corte a laser, plotter e lógica.</p>
    </div>
  </section>

  <main class="container">
    <section class="grid">
      <!-- ===== Modelagem 3D (mantido) ===== -->
      <article class="card" id="sim3d">
        <h3 class="card-title">Impressora3D</h3>
        <div class="card-body">
          <div class="controls">
            <label>X (mm) <input type="number" id="sizeX" min="20" max="400" value="120"></label>
            <label>Y (mm) <input type="number" id="sizeY" min="20" max="400" value="120"></label>
            <label>Z (mm) <input type="number" id="sizeZ" min="20" max="400" value="120"></label>
            <label>Rot X <input type="range" id="rotX" min="-180" max="180" value="20"></label>
            <label>Rot Y <input type="range" id="rotY" min="-180" max="180" value="20"></label>
            <label>Rot Z <input type="range" id="rotZ" min="-180" max="180" value="0"></label>
            <label>Zoom <input type="range" id="scale" min="0.5" max="2" step="0.01" value="1"></label>
          </div>
          <div class="canvas-wrap" style="perspective:800px">
            <div id="cube" style="position:relative;width:120px;height:120px;transform-style:preserve-3d">
              <div class="face" style="background:linear-gradient(135deg,#93c5fd,#2563eb); transform:translate3d(0,0,60px)"></div>
              <div class="face" style="background:linear-gradient(135deg,#86efac,#16a34a); transform:rotateY(180deg) translate3d(0,0,60px)"></div>
              <div class="face" style="background:linear-gradient(135deg,#fca5a5,#ef4444); transform:rotateY(-90deg) translate3d(0,0,60px)"></div>
              <div class="face" style="background:linear-gradient(135deg,#fcd34d,#eab308); transform:rotateY(90deg) translate3d(0,0,60px)"></div>
              <div class="face" style="background:linear-gradient(135deg,#c4b5fd,#6a1b9a); transform:rotateX(90deg) translate3d(0,0,60px)"></div>
              <div class="face" style="background:linear-gradient(135deg,#f0abfc,#a21caf); transform:rotateX(-90deg) translate3d(0,0,60px)"></div>
            </div>
          </div>
          <p class="muted">Defina as dimensões em mm (X, Y, Z). 1 px ≈ 1 mm para referência visual.</p>
        </div>
      </article>

      <!-- ===== Corte a Laser (mantido) ===== -->
      <article class="card" id="simlaser">
        <h3 class="card-title">Corte a Laser</h3>
        <div class="card-body">
          <div class="controls">
            <button class="btn" id="addRect">Retângulo</button>
            <button class="btn" id="addCirc">Círculo</button>
            <label>Vel. (mm/s) <input type="range" id="vel" min="10" max="200" step="1" value="80"></label>
            <label>Potência (%) <input type="range" id="pow" min="1" max="100" step="1" value="60"></label>
            <button class="btn" id="run">▶ Simular</button>
            <button class="btn" id="clear">Limpar</button>
          </div>
          <div class="canvas-wrap">
            <canvas id="cnv" width="500" height="300" style="max-width:100%"></canvas>
          </div>
          <p class="muted">Tempo estimado ≈ <span id="tempo">0.0</span>s • Comprimento ≈ <span id="len">0.0</span> mm</p>
        </div>
      </article>

      <!-- ===== Plotter 2D — área fixa no visor, tamanho real no arquivo ===== -->
      <article class="card" id="simplotter">
        <h3 class="card-title">Plotter de Recorte</h3>
        <div class="card-body">
          <div class="controls">
            <label>Largura X (mm) <input type="number" id="plotW" min="100" max="1000" value="500"></label>
            <label>Altura Y (mm) <input type="number" id="plotH" min="100" max="800" value="300"></label>
            <label>Texto <input type="text" id="txt" value="Help Amado"/></label>
            <label>Tamanho (mm) <input type="range" id="fs" min="10" max="200" step="1" value="50"></label>
            <label><input type="checkbox" id="mirror"> Espelhar</label>
            <button class="btn" id="centerArt">Centralizar</button>
            <button class="btn btn-primary" id="dlSvg">Baixar SVG</button>
          </div>

          <!-- Visor fixo: 520x320 px (não muda). Trabalho é reescalado para simular o tamanho real. -->
          <div class="canvas-wrap" style="padding:0">
            <svg id="plotView" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 520 320" width="520" height="320" style="max-width:100%; background:#fff">
              <!-- moldura do visor -->
              <rect x="0" y="0" width="520" height="320" fill="#fff"/>
              <!-- grupo de trabalho (transform: translate + scale) -->
              <g id="work">
                <!-- área de trabalho em mm (desenhada escalada) -->
                <rect id="workArea" x="0" y="0" width="500" height="300" fill="#ffffff" stroke="#e5e7eb" stroke-width="1"/>
                <!-- grid (20 mm) -->
                <g id="plotGrid"></g>
                <!-- grupo para espelhamento -->
                <g id="mirG">
                  <!-- arte: texto arrastável em mm -->
                  <text id="plotText" x="250" y="150" font-family="Arial, Helvetica, sans-serif"
                        font-weight="900" font-size="96"
                        text-anchor="middle" dominant-baseline="middle"
                        fill="#111" style="cursor:move; user-select:none;">Help Amado</text>
                </g>
              </g>
            </svg>
            <div style="position:absolute;bottom:8px;right:10px" class="muted">
              X: <span id="plotX">0</span> mm • Y: <span id="plotY">0</span> mm
            </div>
          </div>
          <p class="muted">O visor é fixo; usamos escala interna para simular o tamanho X×Y real. O SVG baixado sai em mm no tamanho solicitado.</p>
        </div>
      </article>

      <!-- ===== Snake (mantido) ===== -->
      <article class="card" id="snk">
        <h3 class="card-title">Lógica</h3>
        <div class="card-body">
          <div class="controls">
            <button class="btn btn-primary" id="startSnake">Iniciar</button>
            <span class="muted">Setas ou W/A/S/D para mover • Pontos: <strong id="score">0</strong></span>
          </div>
          <div class="canvas-wrap">
            <canvas id="snakeCanvas" width="360" height="360" style="image-rendering: pixelated;max-width:100%"></canvas>
          </div>
        </div>
      </article>
    </section>
  </main>

  <footer class="site-footer">
    <div class="footer-wrap">
      <p>© 2025 Help Amado — Todos os direitos reservados.</p>
      <p>Aprender fazendo: 3D • Laser • Plotter • Lógica</p>
    </div>
  </footer>

  <script>
    /* ===== Modelagem 3D (mantido) ===== */
    (function(){
      const cube = document.getElementById('cube');
      const sizeX=document.getElementById('sizeX');
      const sizeY=document.getElementById('sizeY');
      const sizeZ=document.getElementById('sizeZ');
      const rX=document.getElementById('rotX');
      const rY=document.getElementById('rotY');
      const rZ=document.getElementById('rotZ');
      const scale=document.getElementById('scale');

      const BASE=120;
      function updCube(){
        const rx=+rX.value, ry=+rY.value, rz=+rZ.value;
        const zoom=+scale.value;
        const sx=(+sizeX.value||BASE)/BASE;
        const sy=(+sizeY.value||BASE)/BASE;
        const sz=(+sizeZ.value||BASE)/BASE;
        cube.style.transform = `translateZ(0) rotateX(${rx}deg) rotateY(${ry}deg) rotateZ(${rz}deg) scale3d(${(sx*zoom)}, ${(sy*zoom)}, ${(sz*zoom)})`;
      }
      ['input','change'].forEach(evt=>{
        [sizeX,sizeY,sizeZ,rX,rY,rZ,scale].forEach(el=>el.addEventListener(evt,updCube));
      });
      updCube();
    })();

    /* ===== Laser 2D (mantido) ===== */
    const cnv=document.getElementById('cnv'), ctx=cnv.getContext('2d'); const shapes=[];
    const vel=document.getElementById('vel'), pow=document.getElementById('pow'), tempo=document.getElementById('tempo'), lenOut=document.getElementById('len');
    function drawGrid(){
      ctx.clearRect(0,0,cnv.width,cnv.height); ctx.fillStyle='#fff'; ctx.fillRect(0,0,cnv.width,cnv.height);
      ctx.strokeStyle='#eef2f7'; ctx.lineWidth=1;
      for(let x=0;x<cnv.width;x+=20){ ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,cnv.height); ctx.stroke(); }
      for(let y=0;y<cnv.height;y+=20){ ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(cnv.width,y); ctx.stroke(); }
      shapes.forEach(s=>{ ctx.strokeStyle=s.type==='rect'?'#ef4444':'#2563eb'; ctx.lineWidth=2; ctx.beginPath();
        if(s.type==='rect') ctx.rect(s.x,s.y,s.w,s.h); else ctx.arc(s.cx,s.cy,s.r,0,Math.PI*2); ctx.stroke(); });
    }
    function addRect(){ shapes.push({type:'rect',x:40+Math.random()*320,y:40+Math.random()*160,w:60+Math.random()*80,h:40+Math.random()*80}); updateStats(); drawGrid(); }
    function addCirc(){ shapes.push({type:'circ',cx:80+Math.random()*340,cy:60+Math.random()*140,r:20+Math.random()*40}); updateStats(); drawGrid(); }
    function pathLength(){ let L=0; shapes.forEach(s=>{ if(s.type==='rect') L+=2*(Math.abs(s.w)+Math.abs(s.h)); else L+=2*Math.PI*Math.abs(s.r); }); return L; }
    function updateStats(){ const L=pathLength(); lenOut.textContent=L.toFixed(1); const v=Math.max(10,+vel.value); const t=L/v; tempo.textContent=t.toFixed(1); }
    function simulate(){
      const segs=[]; shapes.forEach(s=>{
        if(s.type==='rect'){
          const p=[{x:s.x,y:s.y},{x:s.x+s.w,y:s.y},{x:s.x+s.w,y:s.y+s.h},{x:s.x,y:s.y+s.h},{x:s.x,y:s.y}];
          for(let i=0;i<p.length-1;i++) segs.push([p[i],p[i+1]]);
        } else {
          const N=80; let pr=null; for(let i=0;i<=N;i++){ const a=i/N*2*Math.PI, pt={x:s.cx+s.r*Math.cos(a),y:s.cy+s.r*Math.sin(a)}; if(pr) segs.push([pr,pt]); pr=pt; }
        }});
      let idx=0, prog=0; const v=Math.max(10,+vel.value), dt=1/60;
      function step(){ drawGrid(); ctx.strokeStyle='rgba(239,68,68,.9)'; ctx.lineWidth=3; ctx.beginPath();
        for(let j=0;j<idx;j++){ const [a,b]=segs[j]; ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); } ctx.stroke();
        if(idx<segs.length){
          const [a,b]=segs[idx]; const dx=b.x-a.x, dy=b.y-a.y, L=Math.hypot(dx,dy); const t=Math.min(1, prog/L);
          const x=a.x+dx*t, y=a.y+dy*t; ctx.beginPath(); ctx.arc(x,y,5,0,Math.PI*2); ctx.fillStyle='#ef4444'; ctx.fill();
          prog+=v*dt*0.6; if(prog>=L){ idx++; prog=0; } requestAnimationFrame(step);
        } }
      requestAnimationFrame(step);
    }
    document.getElementById('addRect').onclick=addRect; document.getElementById('addCirc').onclick=addCirc; document.getElementById('run').onclick=simulate; document.getElementById('clear').onclick=()=>{shapes.length=0; updateStats(); drawGrid();}
    vel.oninput=updateStats; drawGrid(); updateStats();

    /* ===== Plotter 2D — visor fixo, saída real ===== */
    (function(){
      // elementos
      const svg = document.getElementById('plotView');
      const work = document.getElementById('work');
      const workArea = document.getElementById('workArea');
      const grid = document.getElementById('plotGrid');
      const mirG = document.getElementById('mirG');
      const txtEl = document.getElementById('plotText');
      const plotX = document.getElementById('plotX'), plotY = document.getElementById('plotY');

      // inputs
      const inW = document.getElementById('plotW');
      const inH = document.getElementById('plotH');
      const inTxt = document.getElementById('txt');
      const inFS  = document.getElementById('fs');   // em mm
      const inMirror = document.getElementById('mirror');
      const centerBtn = document.getElementById('centerArt');

      // visor fixo
      const VW = 520, VH = 320; // NÃO muda

      // estado em mm
      let Wmm = +inW.value || 500;
      let Hmm = +inH.value || 300;
      let fontMM = +inFS.value || 96;
      let art = { x: Wmm/2, y: Hmm/2 }; // posição do texto em mm
      let mirror = inMirror.checked;

      // escala e offset (mm -> px do visor)
      let S=1, offX=0, offY=0, pad=12;

      function fitToView(){
        // calcula escala para caber no visor com margem
        const sX = (VW - 2*pad) / Wmm;
        const sY = (VH - 2*pad) / Hmm;
        S = Math.min(sX, sY);
        // centraliza
        const usedW = Wmm * S;
        const usedH = Hmm * S;
        offX = (VW - usedW)/2;
        offY = (VH - usedH)/2;

        // aplica transform no grupo de trabalho
        work.setAttribute('transform', `translate(${offX},${offY}) scale(${S})`);

        // atualiza área e grid (em mm, mas serão escalados)
        workArea.setAttribute('width', Wmm);
        workArea.setAttribute('height', Hmm);
        rebuildGrid();
        applyMirror();
        applyText();
      }

      function rebuildGrid(){
        grid.innerHTML = '';
        // linhas a cada 20mm
        for(let x=0; x<=Wmm; x+=20){
          const l = line(x,0,x,Hmm); grid.appendChild(l);
        }
        for(let y=0; y<=Hmm; y+=20){
          const l = line(0,y,Wmm,y); grid.appendChild(l);
        }
        function line(x1,y1,x2,y2){
          const L = document.createElementNS('http://www.w3.org/2000/svg','line');
          L.setAttribute('x1',x1); L.setAttribute('y1',y1); L.setAttribute('x2',x2); L.setAttribute('y2',y2);
          L.setAttribute('stroke','#eef2f7'); L.setAttribute('stroke-width','1');
          return L;
        }
      }

      function applyMirror(){
        // espelha dentro da área (em mm)
        if(mirror){
          mirG.setAttribute('transform', `scale(-1,1) translate(${-Wmm},0)`);
        }else{
          mirG.removeAttribute('transform');
        }
      }

      function applyText(){
        txtEl.textContent = inTxt.value || '';
        txtEl.setAttribute('font-size', fontMM); // mm (escala aplicada pelo grupo)
        txtEl.setAttribute('x', art.x);
        txtEl.setAttribute('y', art.y);
      }

      // pointer -> mm (considerando espelho)
      function screenToMM(evt){
        const rect = svg.getBoundingClientRect();
        const sx = (evt.clientX - rect.left - offX) / S; // em mm, sem espelho
        const sy = (evt.clientY - rect.top  - offY) / S;
        // se espelhado, x lógico é invertido em relação à área
        const x = mirror ? (Wmm - sx) : sx;
        const y = sy;
        return {x,y};
      }

      // arrastar texto
      let dragging=false, dx=0, dy=0;
      txtEl.addEventListener('pointerdown', (e)=>{
        dragging=true;
        const p = screenToMM(e);
        dx = p.x - art.x; dy = p.y - art.y;
        txtEl.setPointerCapture(e.pointerId);
        e.preventDefault();
      });
      svg.addEventListener('pointermove', (e)=>{
        // coordenadas do mouse no visor (mm)
        const rect = svg.getBoundingClientRect();
        const sx = (e.clientX - rect.left - offX) / S;
        const sy = (e.clientY - rect.top  - offY) / S;
        // mostrar mm do cursor (não considera espelho)
        plotX.textContent = Math.max(0,Math.min(Wmm,sx)).toFixed(0);
        plotY.textContent = Math.max(0,Math.min(Hmm,sy)).toFixed(0);

        if(!dragging) return;
        const p = screenToMM(e);
        art.x = Math.max(0, Math.min(Wmm, p.x - dx));
        art.y = Math.max(0, Math.min(Hmm, p.y - dy));
        applyText();
      });
      svg.addEventListener('pointerup', ()=> dragging=false);
      svg.addEventListener('pointerleave', ()=> dragging=false);

      // inputs
      inW.addEventListener('input', ()=>{
        Wmm = Math.max(100, +inW.value||500); fitToView();
      });
      inH.addEventListener('input', ()=>{
        Hmm = Math.max(100, +inH.value||300); fitToView();
      });
      inTxt.addEventListener('input', applyText);
      inFS.addEventListener('input', ()=>{ fontMM = +inFS.value||96; applyText(); });
      inMirror.addEventListener('change', ()=>{ mirror = inMirror.checked; applyMirror(); applyText(); });
      centerBtn.addEventListener('click', ()=>{ art.x=Wmm/2; art.y=Hmm/2; applyText(); });

      // inicial
      fitToView();

      // download SVG com tamanho real (mm)
      document.getElementById('dlSvg').addEventListener('click', ()=>{
        const esc = (txtEl.getAttribute('font-size')) || fontMM;
        const mirrorTF = mirror ? ` transform="scale(-1,1) translate(${-Wmm},0)"` : '';
        const safeText = (inTxt.value||'').replace(/&/g,'&amp;').replace(/</g,'&lt;');
        const svgStr =
`<svg xmlns="http://www.w3.org/2000/svg" width="${Wmm}mm" height="${Hmm}mm" viewBox="0 0 ${Wmm} ${Hmm}">
  <rect x="0" y="0" width="${Wmm}" height="${Hmm}" fill="#ffffff"/>
  <g${mirrorTF}>
    <text x="${art.x}" y="${art.y}" text-anchor="middle" dominant-baseline="middle"
          font-family="Arial, Helvetica, sans-serif" font-weight="900" font-size="${esc}" fill="#111">${safeText}</text>
  </g>
</svg>`;
        const blob = new Blob([svgStr], {type:'image/svg+xml'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href=url; a.download=`plotter-${Wmm}x${Hmm}mm.svg`; a.click();
        URL.revokeObjectURL(url);
      });
    })();

    /* ===== Snake (mantido) ===== */
    (function(){
      const sc=document.getElementById('snakeCanvas'); const sctx=sc.getContext('2d'); const grid=20; let snake, dir, food, loop, score=0;
      function resetSnake(){ snake=[{x:9,y:9}]; dir={x:1,y:0}; food = randFood(); score=0; document.getElementById('score').textContent=score; }
      function randFood(){ return {x: Math.floor(Math.random()* (sc.width/grid)), y: Math.floor(Math.random()* (sc.height/grid))}; }
      function drawSnake(){ sctx.fillStyle='#ffffff'; sctx.fillRect(0,0,sc.width,sc.height);
        sctx.strokeStyle='#eef2f7'; for(let x=0;x<sc.width;x+=grid){ sctx.beginPath(); sctx.moveTo(x,0); sctx.lineTo(x,sc.height); sctx.stroke(); }
        for(let y=0;y<sc.height;y+=grid){ sctx.beginPath(); sctx.moveTo(0,y); sctx.lineTo(sc.width,y); sctx.stroke(); }
        sctx.fillStyle='#ef4444'; sctx.fillRect(food.x*grid, food.y*grid, grid, grid);
        sctx.fillStyle='#2563eb'; snake.forEach(p=>sctx.fillRect(p.x*grid, p.y*grid, grid, grid));
      }
      function tick(){
        const head = {x: (snake[0].x + dir.x + sc.width/grid)%(sc.width/grid), y: (snake[0].y + dir.y + sc.height/grid)%(sc.height/grid)};
        if(snake.some((p,i)=>i&&p.x===head.x&&p.y===head.y)){ clearInterval(loop); return; }
        snake.unshift(head);
        if(head.x===food.x && head.y===food.y){ score++; document.getElementById('score').textContent=score; food=randFood(); }
        else snake.pop();
        drawSnake();
      }
      function startSnake(){ clearInterval(loop); resetSnake(); drawSnake(); loop=setInterval(tick, 120); }
      document.getElementById('startSnake').onclick=startSnake;
      window.addEventListener('keydown',(e)=>{
        const k=e.key.toLowerCase();
        if((k==='arrowup'||k==='w') && dir.y!==1) dir={x:0,y:-1};
        if((k==='arrowdown'||k==='s') && dir.y!==-1) dir={x:0,y:1};
        if((k==='arrowleft'||k==='a') && dir.x!==1) dir={x:-1,y:0};
        if((k==='arrowright'||k==='d') && dir.x!==-1) dir={x:1,y:0};
      });
      startSnake();
    })();
  </script>
</body>
</html>
